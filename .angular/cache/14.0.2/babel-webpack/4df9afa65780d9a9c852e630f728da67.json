{"ast":null,"code":"import { BooleanHelper } from \"src/app/utilities/boolean.util\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/bookmark.service\";\nimport * as i3 from \"src/app/services/nav-helper.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../header/header.component\";\nimport * as i7 from \"../body/body.component\";\nimport * as i8 from \"../simple/loading/loading.component\";\nimport * as i9 from \"../simple/card/card.component\";\n\nfunction BookmarkFormComponent_ng_container_0_div_35_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const error_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", error_r5, \" \");\n  }\n}\n\nfunction BookmarkFormComponent_ng_container_0_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"p\");\n    i0.ɵɵtext(2, \"Please correct the following errors:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\");\n    i0.ɵɵtemplate(4, BookmarkFormComponent_ng_container_0_div_35_li_4_Template, 2, 1, \"li\", 16);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.errors);\n  }\n}\n\nfunction BookmarkFormComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-header\", 2);\n    i0.ɵɵelementStart(2, \"app-body\")(3, \"div\", 3)(4, \"div\", 4)(5, \"app-card\")(6, \"form\")(7, \"section\", 5);\n    i0.ɵɵtext(8, \" 1. Bookmark name: \");\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function BookmarkFormComponent_ng_container_0_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.bookmark.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"br\")(12, \"br\")(13, \"hr\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"section\", 7);\n    i0.ɵɵtext(15, \" 2. Bookmark link: \");\n    i0.ɵɵelement(16, \"br\");\n    i0.ɵɵelementStart(17, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function BookmarkFormComponent_ng_container_0_Template_input_ngModelChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.bookmark.url = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"br\")(19, \"br\")(20, \"hr\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"section\", 9);\n    i0.ɵɵtext(22, \" 3. Bookmark type: \");\n    i0.ɵɵelement(23, \"br\");\n    i0.ɵɵelementStart(24, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function BookmarkFormComponent_ng_container_0_Template_input_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.bookmark.type = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(25, \"br\")(26, \"br\")(27, \"hr\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"section\", 11);\n    i0.ɵɵtext(29, \" 4. Bookmark order: \");\n    i0.ɵɵelement(30, \"br\");\n    i0.ɵɵelementStart(31, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function BookmarkFormComponent_ng_container_0_Template_input_ngModelChange_31_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.bookmark.order = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"br\")(33, \"br\")(34, \"hr\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(35, BookmarkFormComponent_ng_container_0_div_35_Template, 5, 1, \"div\", 13);\n    i0.ɵɵelementStart(36, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function BookmarkFormComponent_ng_container_0_Template_button_click_36_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.submit());\n    });\n    i0.ɵɵtext(37, \" Save Bookmark \");\n    i0.ɵɵelementEnd()()()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"title\", ctx_r0.title);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.bookmark.name);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.bookmark.url);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.bookmark.type);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.bookmark.order);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showErrors && !ctx_r0.valid);\n  }\n}\n\nfunction BookmarkFormComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loading\");\n  }\n}\n\nexport let BookmarkFormComponent = /*#__PURE__*/(() => {\n  class BookmarkFormComponent {\n    constructor(route, bookmarkService, navHelper) {\n      this.route = route;\n      this.bookmarkService = bookmarkService;\n      this.navHelper = navHelper;\n      this.bookmark = null;\n      this.showErrors = false;\n    }\n\n    get title() {\n      if (this.editMode) {\n        return \"Edit Bookmark\";\n      }\n\n      return \"Create Bookmark\";\n    }\n\n    get errors() {\n      const myErrors = [];\n\n      if (this.nameInvalid) {\n        myErrors.push(\"Please provide a name.\");\n      }\n\n      if (this.linkInvalid) {\n        myErrors.push(\"Please provide a link.\");\n      }\n\n      return myErrors;\n    }\n\n    get valid() {\n      return this.errors.length === 0;\n    }\n\n    get ready() {\n      return BooleanHelper.hasValue(this.bookmark);\n    }\n\n    get editMode() {\n      return this.ready && BooleanHelper.hasValue(this.bookmark._id);\n    }\n\n    get nameInvalid() {\n      return !BooleanHelper.hasValue(this.bookmark.name);\n    }\n\n    get linkInvalid() {\n      return !BooleanHelper.hasValue(this.bookmark.url);\n    }\n\n    ngOnInit() {\n      this.setupForm();\n    }\n\n    submit() {\n      this.showErrors = true;\n\n      if (this.valid) {\n        this.save();\n      }\n    }\n\n    save() {\n      if (this.editMode) {\n        this.runEdit();\n      } else {\n        this.runCreate();\n      }\n    }\n\n    runEdit() {\n      let response;\n      this.bookmarkService.update(this.bookmark).subscribe(res => response = res, error => {\n        console.log(\"update bookmark failed\");\n      }, () => {\n        this.navHelper.goBookmarkOverview();\n      });\n    }\n\n    runCreate() {\n      let response;\n      console.log(this.bookmark);\n      this.bookmarkService.create(this.bookmark).subscribe(res => response = res, error => {\n        console.log(\"create bookmark failed\");\n      }, () => {\n        this.navHelper.goBookmarkOverview();\n      });\n    }\n\n    setupForm() {\n      const urlId = this.route.snapshot.paramMap.get(\"id\");\n\n      if (BooleanHelper.notNull(urlId)) {\n        this.setupEditForm(urlId);\n      } else {\n        this.setupCreateForm();\n      }\n    }\n\n    setupEditForm(id) {\n      this.bookmarkService.getSingle(id).subscribe(res => this.bookmark = res, error => {\n        console.log(\"get bookmark failed\");\n      });\n    }\n\n    setupCreateForm() {\n      this.bookmark = {\n        name: null,\n        url: null,\n        type: null,\n        order: null,\n        _id: null\n      };\n    }\n\n  }\n\n  BookmarkFormComponent.ɵfac = function BookmarkFormComponent_Factory(t) {\n    return new (t || BookmarkFormComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.BookmarkService), i0.ɵɵdirectiveInject(i3.NavHelperService));\n  };\n\n  BookmarkFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookmarkFormComponent,\n    selectors: [[\"app-bookmark-form\"]],\n    decls: 3,\n    vars: 2,\n    consts: [[4, \"ngIf\", \"ngIfElse\"], [\"notReady\", \"\"], [3, \"title\"], [1, \"row\"], [1, \"col-md-12\", \"my-3\"], [\"id\", \"bookmark-name\"], [\"type\", \"text\", \"name\", \"bookmarkName\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"bookmark-link\"], [\"type\", \"text\", \"name\", \"bookmarkLink\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"bookmark-type\"], [\"type\", \"text\", \"name\", \"bookmarkType\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"bookmark-order\"], [\"type\", \"text\", \"name\", \"bookmarkOrder\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"error-report alert alert-danger\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"error-report\", \"alert\", \"alert-danger\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function BookmarkFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, BookmarkFormComponent_ng_container_0_Template, 38, 6, \"ng-container\", 0);\n        i0.ɵɵtemplate(1, BookmarkFormComponent_ng_template_1_Template, 1, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(2);\n\n        i0.ɵɵproperty(\"ngIf\", ctx.ready)(\"ngIfElse\", _r1);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm, i6.HeaderComponent, i7.BodyComponent, i8.LoadingComponent, i9.CardComponent]\n  });\n  return BookmarkFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}